<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <title>å‚³çµ±ç²¿æ–‡åŒ– - è·äººå·¥ä½œåŠ</title>
    <style>
        :root { --main-red: #d32f2f; --main-green: #2e7d32; --bg: #fdf5e6; }
        body { font-family: sans-serif; background: var(--bg); display: flex; flex-direction: column; align-items: center; }
        
        /* é£Ÿæå€ 2x2 æ’åˆ— */
        .ingredient-grid { 
            display: grid; grid-template-columns: 100px 100px; gap: 10px; 
            background: #fff; padding: 15px; border-radius: 10px; box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }
        .filling-area { margin-top: 10px; display: flex; gap: 10px; }
        .item { 
            border: 2px solid #ccc; padding: 10px; text-align: center; cursor: pointer;
            border-radius: 8px; transition: transform 0.1s; background: white;
        }
        .item:active { transform: scale(0.95); background: #eee; }

        /* è’¸ç± å€ */
        .steamer-area { 
            margin-top: 50px; position: relative; width: 250px; height: 150px;
            background: #8d6e63; border-radius: 50% / 20%; border: 4px solid #5d4037;
            display: flex; justify-content: center; align-items: center;
        }
        
        /* å½ˆçª—æ¨£å¼ */
        .modal { 
            position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%);
            background: white; padding: 30px; border-radius: 15px; box-shadow: 0 0 20px rgba(0,0,0,0.3);
            text-align: center; display: none; z-index: 100; min-width: 250px;
        }
        .overlay { position: fixed; top:0; left:0; width:100%; height:100%; background: rgba(0,0,0,0.5); display:none; }
    </style>
</head>
<body>

    <h2>ğŸ¥£ ç²¿é¡è£½ä½œå·¥ä½œåŠ</h2>
    
    <div class="ingredient-grid" id="main-ingredients">
        <div class="item" onclick="add('ç´…ç±³åœ˜')">ğŸ”´ ç´…ç±³åœ˜</div>
        <div class="item" onclick="add('ç™½ç±³åœ˜')">âšª ç™½ç±³åœ˜</div>
        <div class="item" onclick="add('ç¶ ç±³åœ˜')">ğŸŸ¢ ç¶ ç±³åœ˜</div>
        <div class="item" onclick="add('ç±³æ¼¿')">ğŸ¥› ç±³æ¼¿</div>
    </div>
    <div class="filling-area">
        <div class="item" onclick="add('ç”œé¤¡')">ğŸ¯ ç”œé¤¡</div>
        <div class="item" onclick="add('é¹¹é¤¡')">ğŸ¥© é¹¹é¤¡</div>
    </div>

    <div class="steamer-area" id="steamer">
        <div id="status">é»æ“Šé£Ÿæé–‹å§‹è£½ä½œ...</div>
    </div>
    <button onclick="checkRecipe()" style="margin-top:20px; padding:10px 30px;">è“‹ä¸Šè’¸ç± è“‹</button>
    <button onclick="reset()" style="margin-top:10px; font-size: 12px;">æ¸…ç©ºé£Ÿæ</button>

    <div class="overlay" id="overlay"></div>
    <div class="modal" id="modal">
        <h3 id="modal-title"></h3>
        <p id="modal-content"></p>
        <button onclick="closeModal()">ç¢ºèª</button>
    </div>

    <script>
        // éŠæˆ²ç‹€æ…‹
        let currentMix = {};
        let achievements = new Set();
        
        // é£Ÿè­œå®šç¾© (ç¯„ä¾‹çµ„åˆ)
        const recipes = [
            { name: "ç´…é¾œç²¿", ingredients: { "ç´…ç±³åœ˜": 1, "ç”œé¤¡": 1 }, hint: "ç´…ç±³åœ˜ + ç”œé¤¡" },
            { name: "èœé ­ç²¿", ingredients: { "ç±³æ¼¿": 1, "é¹¹é¤¡": 1 }, hint: "ç±³æ¼¿ + é¹¹é¤¡" },
            { name: "ç´…åœ“", ingredients: { "ç´…ç±³åœ˜": 2 }, hint: "å…©å€‹ç´…ç±³åœ˜" },
            { name: "è‰ä»”ç²¿", ingredients: { "ç¶ ç±³åœ˜": 1, "é¹¹é¤¡": 1 }, hint: "ç¶ ç±³åœ˜ + é¹¹é¤¡" },
            { name: "èŠ‹ç²¿", ingredients: { "ç™½ç±³åœ˜": 1, "é¹¹é¤¡": 1 }, hint: "ç™½ç±³åœ˜ + é¹¹é¤¡" },
            // æ¹¯åœ“å…©ç¨®åšæ³•
            { name: "æ¹¯åœ“", ingredients: { "ç´…ç±³åœ˜": 1, "ç™½ç±³åœ˜": 1 }, isTangyuan: true, hint: "ç´…ç±³åœ˜ + ç™½ç±³åœ˜" },
            { name: "æ¹¯åœ“", ingredients: { "ç™½ç±³åœ˜": 1, "ç”œé¤¡": 1 }, isTangyuan: true, hint: "ç™½ç±³åœ˜ + ç”œé¤¡" }
        ];

        function add(item) {
            currentMix[item] = (currentMix[item] || 0) + 1;
            document.getElementById('status').innerText = "å·²åŠ å…¥: " + Object.entries(currentMix).map(([k,v]) => `${k}x${v}`).join(', ');
        }

        function checkRecipe() {
            // æ¯”å°é£Ÿè­œ
            const successRecipe = recipes.find(r => {
                const rKeys = Object.keys(r.ingredients);
                const mKeys = Object.keys(currentMix);
                if (rKeys.length !== mKeys.length) return false;
                return rKeys.every(k => r.ingredients[k] === currentMix[k]);
            });

            if (successRecipe) {
                showSuccess(successRecipe.name);
            } else {
                showFailure();
            }
            reset();
        }

        function showSuccess(name) {
            achievements.add(name);
            const modal = document.getElementById('modal');
            document.getElementById('modal-title').innerText = "âœ¨ ç²å¾—æˆå°± âœ¨";
            document.getElementById('modal-content').innerText = "ä½ æˆåŠŸè£½ä½œå‡ºäº†ï¼š" + name;
            
            if (achievements.size === 6) { // å…¨éƒ¨è§£é– (ç´…é¾œ, èœé ­, ç´…åœ“, è‰ä»”, èŠ‹ç²¿, æ¹¯åœ“)
                document.getElementById('modal-content').innerHTML += "<br><br>ğŸŠ æ­å–œé”æˆå…¨æˆå°±ï¼<br>ç²å¾—çå‹µï¼šLINE è²¼åœ–ä¸‹è¼‰é€£çµ";
            }
            
            showModal();
        }

        function showFailure() {
            // æ‰¾å‡ºå°šæœªè§£é–çš„é£Ÿè­œä½œç‚ºæç¤º
            const lockedRecipes = recipes.filter(r => !achievements.has(r.name));
            const randomHint = lockedRecipes[Math.floor(Math.random() * lockedRecipes.length)];
            
            document.getElementById('modal-title').innerText = "âŒ è£½ä½œå¤±æ•—";
            document.getElementById('modal-content').innerText = randomHint ? 
                `æ²’èƒ½åšå‡ºå¥½åƒçš„ç²¿... æç¤ºï¼šè©¦è©¦çœ‹ã€Œ${randomHint.hint}ã€ï¼Ÿ` : "é›–ç„¶å¤±æ•—äº†ï¼Œä½†ä½ å·²ç¶“æ˜¯ç²¿é¡å¤§å¸«äº†ï¼";
            showModal();
        }

        function reset() { currentMix = {}; document.getElementById('status').innerText = "è’¸ç± å·²æ¸…ç©ºï¼Œè«‹é‡æ–°é¸æ“‡é£Ÿæ"; }
        function showModal() { document.getElementById('modal').style.display = 'block'; document.getElementById('overlay').style.display = 'block'; }
        function closeModal() { document.getElementById('modal').style.display = 'none'; document.getElementById('overlay').style.display = 'none'; }
    </script>
</body>
</html>
